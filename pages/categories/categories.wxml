<!-- pages/categories/categories.wxml -->
<view class="container">
  <!-- 头部 -->
  <view class="page-header">
    <view class="page-header-title">音乐分类</view>
    <view class="page-header-subtitle">选择您喜欢的音乐类型</view>
  </view>

  <!-- 分类加载状态 -->
  <view class="loading" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">加载中...</text>
  </view>

  <!-- 分类网格 -->
  <view class="categories-grid" wx:if="{{!loading}}">
    <view 
      class="category-card category-item-wrapper {{(item.count || 0) === 0 ? 'empty-category' : ''}}" 
      wx:for="{{categories}}" 
      wx:key="id"
      bindtap="onCategoryTap"
      data-category="{{item}}"
      data-id="{{item.id}}"
    >
      <view class="category-icon-container">
        <view class="category-icon">{{item.icon}}</view>
        <view class="category-status" wx:if="{{(item.count || 0) === 0}}">🚧</view>
      </view>
      <view class="category-info">
        <view class="category-name">{{item.name}}</view>
        <view class="category-description">{{item.description}}</view>
        <view class="category-count" wx:if="{{(item.count || 0) > 0}}">{{item.count}}首</view>
        <view class="category-count empty-hint" wx:else>暂无</view>
      </view>
    </view>
  </view>

  <!-- 空状态 -->
  <view class="empty-state" wx:if="{{!loading && categories.length === 0}}">
    <view class="empty-icon">🎵</view>
    <text class="empty-title">暂无分类</text>
    <text class="empty-desc">音乐分类正在完善中</text>
  </view>

  <!-- 快速访问区域 -->
  <view class="quick-access" wx:if="{{!loading && categories.length > 0}}">
    <view class="section-title">快速访问</view>
    <view class="quick-buttons">
      <button class="quick-btn" bindtap="onRandomPlay">
        🌟 智能推荐
      </button>
      <button class="quick-btn" bindtap="onSearchMusic">
        🔍 搜索音乐
      </button>
    </view>
  </view>
</view>

<!-- 统一底部播放器 -->
<global-player 
  id="globalPlayer"
  visible="{{showGlobalPlayer}}"
  bind:playStateChange="onGlobalPlayerStateChange"
  bind:nextTrack="onNextTrack"
  bind:previousTrack="onPreviousTrack"
  bind:closePlayer="onCloseGlobalPlayer"
  bind:expandPlayer="onExpandGlobalPlayer"
/>
