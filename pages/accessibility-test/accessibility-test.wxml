<!-- å¯è®¿é—®æ€§æµ‹è¯•é¡µé¢ -->
<view class="accessibility-test-container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <text class="page-title">ğŸ” å¯è®¿é—®æ€§æµ‹è¯•</text>
    <text class="page-subtitle">åŸºäºWCAG 2.1æ ‡å‡†çš„è‰²å½©å¯¹æ¯”åº¦æµ‹è¯•</text>
  </view>

  <!-- æµ‹è¯•æ§åˆ¶é¢æ¿ -->
  <view class="control-panel">
    <button class="btn btn-brand" bindtap="runFullTest">
      {{isRunning ? 'æµ‹è¯•ä¸­...' : 'å¼€å§‹å…¨é¢æµ‹è¯•'}}
    </button>
    <button class="btn btn-secondary" bindtap="generateReport">ç”ŸæˆæŠ¥å‘Š</button>
    <button class="btn btn-outline" bindtap="exportResults">å¯¼å‡ºç»“æœ</button>
  </view>

  <!-- æµ‹è¯•ç»“æœæ¦‚è§ˆ -->
  <view class="results-overview" wx:if="{{testResults}}">
    <view class="overview-card">
      <text class="overview-title">æµ‹è¯•ç»“æœæ¦‚è§ˆ</text>
      <view class="stats-grid">
        <view class="stat-item">
          <text class="stat-number">{{testResults.summary.total}}</text>
          <text class="stat-label">æ€»æµ‹è¯•é¡¹</text>
        </view>
        <view class="stat-item success">
          <text class="stat-number">{{testResults.summary.passed}}</text>
          <text class="stat-label">é€šè¿‡é¡¹</text>
        </view>
        <view class="stat-item error" wx:if="{{testResults.summary.failed > 0}}">
          <text class="stat-number">{{testResults.summary.failed}}</text>
          <text class="stat-label">å¤±è´¥é¡¹</text>
        </view>
        <view class="stat-item">
          <text class="stat-number">{{testResults.summary.passRate}}%</text>
          <text class="stat-label">é€šè¿‡ç‡</text>
        </view>
      </view>
      
      <!-- é€šè¿‡ç‡è¿›åº¦æ¡ -->
      <view class="progress-container">
        <text class="progress-label">æ•´ä½“é€šè¿‡ç‡</text>
        <view class="progress-bar">
          <view 
            class="progress-fill {{testResults.summary.passRate >= 90 ? 'success' : testResults.summary.passRate >= 70 ? 'warning' : 'error'}}"
            style="width: {{testResults.summary.passRate}}%;"
          ></view>
        </view>
        <text class="progress-text">{{testResults.summary.passRate}}%</text>
      </view>
    </view>
  </view>

  <!-- è¯¦ç»†æµ‹è¯•ç»“æœ -->
  <view class="detailed-results" wx:if="{{testResults && testResults.details}}">
    <text class="section-title">ğŸ“‹ è¯¦ç»†æµ‹è¯•ç»“æœ</text>
    
    <view class="test-results-list">
      <view 
        class="test-result-item {{item.passed ? 'passed' : 'failed'}}"
        wx:for="{{testResults.details}}"
        wx:key="index"
      >
        <!-- æµ‹è¯•çŠ¶æ€å›¾æ ‡ -->
        <view class="result-icon">
          <text class="icon">{{item.passed ? 'âœ…' : 'âŒ'}}</text>
        </view>
        
        <!-- æµ‹è¯•ä¿¡æ¯ -->
        <view class="result-info">
          <text class="test-description">{{item.description}}</text>
          <view class="color-preview">
            <view 
              class="color-sample"
              style="color: {{item.foreground}}; background-color: {{item.background}};"
            >
              ç¤ºä¾‹æ–‡å­— Sample Text
            </view>
          </view>
          <view class="test-metrics">
            <text class="metric">å¯¹æ¯”åº¦: {{item.ratio}}:1</text>
            <text class="level-badge level-{{item.level}}">{{item.level}}</text>
          </view>
          <text class="recommendation">{{item.recommendation}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æ”¹è¿›å»ºè®® -->
  <view class="recommendations" wx:if="{{testResults && testResults.recommendations}}">
    <text class="section-title">ğŸ’¡ æ”¹è¿›å»ºè®®</text>
    <view class="recommendations-list">
      <view 
        class="recommendation-item"
        wx:for="{{testResults.recommendations}}"
        wx:key="index"
      >
        <text class="recommendation-text">{{item}}</text>
      </view>
    </view>
  </view>

  <!-- è‡ªå®šä¹‰æµ‹è¯•åŒºåŸŸ -->
  <view class="custom-test">
    <text class="section-title">ğŸ¨ è‡ªå®šä¹‰é¢œè‰²æµ‹è¯•</text>
    <view class="custom-test-form">
      <view class="input-group">
        <text class="input-label">å‰æ™¯è‰² (æ–‡å­—é¢œè‰²)</text>
        <input 
          class="color-input" 
          type="text" 
          placeholder="#1F2937" 
          value="{{customForeground}}"
          bindinput="onForegroundChange"
        />
      </view>
      <view class="input-group">
        <text class="input-label">èƒŒæ™¯è‰²</text>
        <input 
          class="color-input" 
          type="text" 
          placeholder="#FFFFFF" 
          value="{{customBackground}}"
          bindinput="onBackgroundChange"
        />
      </view>
      <button class="btn btn-info" bindtap="testCustomColors">æµ‹è¯•ç»„åˆ</button>
    </view>
    
    <!-- è‡ªå®šä¹‰æµ‹è¯•ç»“æœ -->
    <view class="custom-result" wx:if="{{customTestResult}}">
      <view class="custom-preview">
        <view 
          class="custom-sample"
          style="color: {{customForeground}}; background-color: {{customBackground}};"
        >
          è¿™æ˜¯æµ‹è¯•æ–‡å­—æ ·ä¾‹
        </view>
      </view>
      <view class="custom-metrics">
        <text class="custom-ratio">å¯¹æ¯”åº¦: {{customTestResult.ratio}}:1</text>
        <text class="custom-level level-{{customTestResult.level}}">{{customTestResult.level}}</text>
        <text class="custom-recommendation">{{customTestResult.recommendation}}</text>
      </view>
    </view>
  </view>

  <!-- WCAGæ ‡å‡†è¯´æ˜ -->
  <view class="wcag-standards">
    <text class="section-title">ğŸ“š WCAG 2.1 æ ‡å‡†è¯´æ˜</text>
    <view class="standards-grid">
      <view class="standard-item">
        <view class="standard-level level-AAA">AAA</view>
        <view class="standard-info">
          <text class="standard-name">AAAçº§ - å¢å¼º</text>
          <text class="standard-desc">æ™®é€šæ–‡å­—: 7:1, å¤§æ–‡å­—: 4.5:1</text>
        </view>
      </view>
      <view class="standard-item">
        <view class="standard-level level-AA">AA</view>
        <view class="standard-info">
          <text class="standard-name">AAçº§ - æ ‡å‡†</text>
          <text class="standard-desc">æ™®é€šæ–‡å­—: 4.5:1, å¤§æ–‡å­—: 3:1</text>
        </view>
      </view>
      <view class="standard-item">
        <view class="standard-level level-FAIL">FAIL</view>
        <view class="standard-info">
          <text class="standard-name">ä¸è¾¾æ ‡</text>
          <text class="standard-desc">å¯¹æ¯”åº¦ä¸è¶³ï¼Œå½±å“å¯è¯»æ€§</text>
        </view>
      </view>
    </view>
  </view>

  <!-- é¢œè‰²ç†è®ºè¯´æ˜ -->
  <view class="color-theory">
    <text class="section-title">ğŸ­ è‰²å½©å¿ƒç†å­¦åœ¨ç–—æ„ˆåº”ç”¨ä¸­çš„ä½œç”¨</text>
    <view class="theory-cards">
      <view class="theory-card">
        <text class="theory-title">ğŸ§˜ å¹³é™è‰²è°ƒ</text>
        <text class="theory-desc">è“ç»¿è‰²ç³»æœ‰åŠ©äºé™ä½å¿ƒç‡ï¼Œä¿ƒè¿›æ”¾æ¾å’Œå†¥æƒ³çŠ¶æ€</text>
      </view>
      <view class="theory-card">
        <text class="theory-title">ğŸ”¥ æ´»åŠ›è‰²è°ƒ</text>
        <text class="theory-desc">æš–æ©™è‰²ç³»èƒ½æ¿€å‘å¤šå·´èƒºåˆ†æ³Œï¼Œæå‡ç§¯ææƒ…ç»ªå’Œåˆ›é€ åŠ›</text>
      </view>
      <view class="theory-card">
        <text class="theory-title">ğŸŒ¿ æ²»æ„ˆè‰²è°ƒ</text>
        <text class="theory-desc">è‡ªç„¶ç»¿è‰²ç³»æ¿€æ´»å‰¯äº¤æ„Ÿç¥ç»ï¼Œæœ‰åŠ©äºå‹åŠ›ç¼“è§£å’Œåº·å¤</text>
      </view>
    </view>
  </view>
</view>
