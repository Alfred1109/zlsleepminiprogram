<!--商品API测试页面-->
<view class="container">
  <view class="header">
    <text class="title">商品API测试</text>
    <text class="subtitle">验证商品相关接口和数据显示</text>
  </view>

  <view class="action-buttons">
    <button 
      class="test-button primary" 
      bindtap="testProductListAPI" 
      loading="{{testing}}"
      disabled="{{testing}}"
    >
      {{testing ? '测试中...' : '测试商品列表'}}
    </button>
    
    <button 
      class="test-button" 
      bindtap="testProductDetail"
      disabled="{{testing || !productData}}"
    >
      测试商品详情
    </button>
  </view>

  <view class="navigation-buttons">
    <button class="nav-button" bindtap="goToProductList">
      📱 打开商品列表页面
    </button>
    
    <button class="nav-button" bindtap="goToAPITest">
      🔧 通用API测试
    </button>
  </view>

  <view class="result-actions">
    <button class="action-button" bindtap="clearResults">
      清空结果
    </button>
    
    <button class="action-button" bindtap="copyResults" disabled="{{testResults.length === 0}}">
      复制结果
    </button>
  </view>

  <view class="results-container">
    <view class="results-header">
      <text class="results-title">测试结果 ({{testResults.length}})</text>
    </view>
    
    <scroll-view class="results-scroll" scroll-y="true" scroll-top="{{9999}}">
      <view class="result-item" wx:for="{{testResults}}" wx:key="index">
        <text class="result-text">{{item}}</text>
      </view>
      
      <view wx:if="{{testResults.length === 0}}" class="empty-results">
        <text class="empty-text">暂无测试结果</text>
        <text class="empty-hint">点击上方按钮开始测试</text>
      </view>
    </scroll-view>
  </view>

  <!-- 商品数据预览 -->
  <view wx:if="{{productData && productData.length > 0}}" class="product-preview">
    <view class="preview-header">
      <text class="preview-title">商品数据预览</text>
    </view>
    
    <view class="product-item" wx:for="{{productData}}" wx:key="id" wx:if="{{index < 3}}">
      <view class="product-info">
        <text class="product-name">{{item.name}}</text>
        <text class="product-price">¥{{item.price / 100}}</text>
        <text class="product-category">{{item.product_category}}</text>
        <text class="product-stock">库存: {{item.stock_quantity}}</text>
      </view>
    </view>
  </view>

  <view class="tips">
    <text class="tip-title">测试说明:</text>
    <text class="tip-text">1. 先测试商品列表API获取数据</text>
    <text class="tip-text">2. 再测试商品详情API</text>
    <text class="tip-text">3. 可以打开商品列表页面查看实际效果</text>
    <text class="tip-text">4. 查看控制台获取详细调试信息</text>
  </view>
</view>
